
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Software, Physics, Data, Mountains</title>
  <meta name="author" content="Mark Mims">

  
  <meta name="description" content="ok, trying to do this for real&#8230; I set suid on screen, so mmm@kojiro:~/projects/ttu/doc$ ls -al /usr/bin/screen
-rwxr-sr-x 1 root utmp 340604 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://markmims.com/blog/page/4">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Software, Physics, Data, Mountains" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Ubuntu:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4132881-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Software, Physics, Data, Mountains</a></h1>
  
    <h2>...and other random associations</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:markmims.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about.html">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/03/09/howto-multiuser-screen-sessions.html">Multiuser Screen Sessions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-09T00:00:00+00:00" pubdate data-updated="true">Mar 9<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ok, trying to do this for real&#8230;</p>

<p>I set suid on screen, so</p>

<pre><code>mmm@kojiro:~/projects/ttu/doc$ ls -al /usr/bin/screen
-rwxr-sr-x 1 root utmp 340604 2010-08-17 10:55 /usr/bin/screen
</code></pre>

<p>becomes</p>

<pre><code>mmm@kojiro:~/projects/ttu/doc$ ls -al /usr/bin/screen
-rwsr-sr-x 1 root utmp 340604 2010-08-17 10:55 /usr/bin/screen
</code></pre>

<p>and then /var/run/screen needs to be 755 instead of 775&#8230; i.e.,</p>

<pre><code>mmm@kojiro:~/projects/ttu/doc$ ls -al /var/run | grep screen
drwxrwxr-x  5 root     utmp      100 2011-02-08 10:17 screen
</code></pre>

<p>becomes</p>

<pre><code>mmm@kojiro:~/projects/ttu/doc$ ls -al /var/run | grep screen
drwxr-xr-x  5 root     utmp      100 2011-02-08 10:17 screen
</code></pre>

<p>Now, user1:</p>

<pre><code>user1@kojiro:~$ screen -x -S junk -t junk
</code></pre>

<p>or just</p>

<pre><code>user1@kojiro:~$ screen -S junk
</code></pre>

<p>user1 sets multiusermode</p>

<pre><code>Ctrl-A :multiuser on
Ctrl-A :acladd user2
Ctrl-A :acladd user3
</code></pre>

<p>user2</p>

<pre><code>user2@kojiro:~$ screen -x mmm/
</code></pre>

<p>user3</p>

<pre><code>user3@kojiro:~$ screen -x mmm/
</code></pre>

<hr />

<p>another version</p>

<pre><code>For security reasons, screen by default is installed so that other users within the system can not attach to your screen sessions. To allow this to be changed one must set screen to run SUID root by doing the following (once):
sudo chmod +s /usr/bin/screen
sudo chmod 755 /var/run/screen
Then user1 can share their session on host as follows:
screen -S shared-session
Ctrla :multiuser on
Ctrla :acladd user2

user2 on host can then connect to the shared session like:
ssh user2@host
screen -x user1/shared-session
</code></pre>

<hr />

<p>first view
    screen -S junk</p>

<p>second view
    screen -x -R junk</p>

<hr />

<p>maybe this&#8217;ll work&#8230;</p>

<p>user1</p>

<pre><code>screen -t junk
</code></pre>

<p>user2 becomes user1</p>

<pre><code>screen -x -t junk
</code></pre>

<hr />

<p>looks like this works&#8230; maybe overkill but wtf?</p>

<p>screen -xR -t junk -S junk</p>

<p>allegedly, 
screen -t junk
screen -x -t junk
should work</p>

<h2 id="below-is-old">below is old</h2>

<p>It&#8217;s possible for two users to share a screen session. This is particularly useful if multiple people want to monitor a long running task, and it&#8217;s easy to do.</p>

<p>user #1:</p>

<p>screen -R longbuild</p>

<p>user #2:</p>

<p>screen -x -R longbuild</p>

<p>The -x flag tells screen to allow you to attach to an already attached session. This is also good for crazy stuff like a collaborative Vim session (if you&#8217;re into that sort of thing).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/03/09/howto-fix-spaces-osx.html">Fix Spaces in Osx</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-09T00:00:00+00:00" pubdate data-updated="true">Mar 9<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>defaults write com.apple.dock workspaces-wrap-arrows -boolean NO
</code></pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/03/02/hawk-notes.html">Hawk-notes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-02T00:00:00+00:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><pre><code>a1 138G root
a2 swap
b1 1T /opt
c1 1.5T /usr/local
d1 2T /home
</code></pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/02/22/howto-vlan-libvirt.html">Manual Vlans for Libvirt?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-22T00:00:00+00:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m gonna set up hawk to configure VMs into isolated VLANs.</p>

<p>most of this comes from</p>

<pre><code>http://www.tolaris.com/2010/02/20/vlans-bridges-and-virtual-machines/
</code></pre>

<p>setting up br0, bt10, and br12</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/02/22/howto-ddwrt.html">Howto-ddwrt</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-22T00:00:00+00:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m loving dd-wrt&#8230;</p>

<p>startup scripts</p>

<pre><code>http://www.dd-wrt.com/wiki/index.php/Startup_Scripts
</code></pre>

<p>iptables</p>

<p>vlans</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/02/13/howto-dnsmasq-ddwrt.html">Dnsmasq Ddwrt</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-13T00:00:00+00:00" pubdate data-updated="true">Feb 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>todo
- lease times (infinite?)
- maybe remove specified ip addresses?
- find better way to configure dnsmasq from startup?</p>

<hr />

<p>unresolved:</p>

<p>had to add static addresses to /etc/hosts on router and then </p>

<pre><code>killall -HUP dnsmasq
</code></pre>

<p>need to figure out how to get this working from router reboot!</p>

<p>ok, resolved this&#8230;</p>

<pre><code>nvram set rc_startup="
  echo '10.10.10.2 hawk.mmmhtm.org' &gt;&gt; /etc/hosts
  echo '10.10.10.10 laserjet.mmmhtm.org' &gt;&gt; /etc/hosts
  killall -HUP dnsmasq
"
nvram commit
reboot
</code></pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/02/05/howto-debug-euca-aoe.html">Debuggin Eucalyptus Aoe</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-05T00:00:00+00:00" pubdate data-updated="true">Feb 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>mostly from
    http://open.eucalyptus.com/forum/attaching-ebs-image
and
    http://www.debian-administration.org/articles/553</p>

<hr />

<h2 id="problem1">problem1</h2>

<p>vtund wasn&#8217;t in sync with the pid in /var/run/eucalyptus and so it &#8220;wasn&#8217;t able to bind to socket&#8221; in /var/log/syslog</p>

<hr />

<h2 id="problem2">problem2</h2>

<p>Volume is created and available from the SC
    ps awux | grep vblade
should return something&#8230; something running on the br0 interface&#8230; but they seem to be stuck on eth0</p>

<hr />

<h2 id="general-method-for-exporting-things-using-aoe">general method for exporting things using aoe</h2>

<p>On the storage controller (&#8220;target&#8221; in AoE lingo)&#8230;</p>

<p>Load the module
    modprobe aoe</p>

<p>Then
    vbladed 0 1 eth0 /dev/sdd5
or for euca
    vblade 0 5 br0 /dev/vg-TldY4A../lv-hrh7uQ.. </p>

<p>Then on the NC (&#8220;initiator&#8221;)&#8230;</p>

<p>discover
    aoe-discover (this wasn&#8217;t necessary on a NC&#8230; just worked once the target had the right device)</p>

<p>status
    aoe-stat
    ls /dev/etherd/</p>

<p>this showed a <code>e0.5</code> entry that can be treated like a regular partition</p>

<p>Note: iSCSI is over TCP (layer 4?), AoE is over Ethernet (layer 2)
so iscsi can be routed, aoe can&#8217;t (at least not without ebtables and l2 switches)
aoe is designed to be used in a tighter lan environment</p>

<hr />

<p>Had to manually change the files in /var/lib/eucalyptus/db/
to use <code>br0</code> instead of <code>eth0</code></p>

<p>This is probably the biggest problem with setting up eucalyptus!!</p>

<hr />

<h2 id="vtun">vtun?</h2>

<p>dunno wtf&#8230; I assume it&#8217;s something going on with tunneling traffic between SC and NC instances?</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/02/04/howto-git-bzr.html">Git and Bzr</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-04T00:00:00+00:00" pubdate data-updated="true">Feb 4<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h1 id="update">update</h1>

<p>Some tools from this were broken&#8230; got a decent set of revisions working&#8230; yay!</p>

<p>Grab and install the following:</p>

<h2 id="git-bzr-ng">git-bzr-ng</h2>

<pre><code>git clone http://github.com/termie/git-bzr-ng.git
(working HEAD was 280eba)
</code></pre>

<p>Now install</p>

<pre><code>cd /usr/local/bin
sudo ln -s ../src/git-bzr-ng/git-bzr-ng git-bzr
</code></pre>

<h2 id="bzr-fastimport">bzr-fastimport</h2>

<pre><code>bzr branch lp:bzr-fastimport -r327
</code></pre>

<p>Now install.<br />
I know there&#8217;re much better ways to do this&#8230;
I&#8217;m just capturing what I did to get it to work</p>

<pre><code>cd bzr-fastimport
sudo ./setup.py install
mv /usr/local/lib/python2.7/dist-packages/bzr-fast"*" /usr/lib/python2.7/dist-packages/
mv /usr/local/lib/python2.7/dist-packages/bzrlib/plugins/fastimport /usr/lib/python2.7/dist-packages/bzrlib/plugins/
</code></pre>

<hr />

<h1 id="original-post">original post</h1>

<p>from http://wiki.openstack.org/GitBzrInstructions</p>

<p>on Ubuntu/Debian:</p>

<pre><code>apt-get install git-core bzr bzr-fastimport; 
git clone git://github.com/kfish/git-bzr
cd git-bzr
sudo cp git-bzr /usr/local/bin
</code></pre>

<p>Using git-bzr:</p>

<p>An example session goes like this:</p>

<pre><code>$ git init
$ git bzr add upstream ../bzr-branch
$ git bzr fetch upstream
$ git checkout -b local_branch upstream
$ Hack hack, merge merge....

$ git bzr push upstream
</code></pre>

<p>see also http://doc.bazaar.canonical.com/migration/en/survival/bzr-for-git-users.html</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/01/31/howto-ruby-gdata.html">Gdata-ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-31T00:00:00+00:00" pubdate data-updated="true">Jan 31<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From:</p>

<pre><code>https://github.com/dsisnero/gdata-ruby.git
https://github.com/tsenying/gdata-ruby-util.git
http://code.google.com/apis/gdata/articles/gdata_on_rails.html
</code></pre>

<hr />

<p>gdata-samples in ~/src</p>

<pre><code>svn checkout http://gdata-samples.googlecode.com/svn/trunk/ gdata-samples-read-only
</code></pre>

<p>or</p>

<pre><code>git svn init http://gdata-samples.googlecode.com/svn/trunk/
git svn fetch
</code></pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/howtos/2011/01/30/howto-sunfire-ilom.html">Sunfire Ilom</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-30T00:00:00+00:00" pubdate data-updated="true">Jan 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>log into the agent</p>

<pre><code>SP -&gt; set /SP/SystemInfo/CtrlInfo PowerCtrl=reset  
The System will be Reset.
Do you wish to Continue..?(y/n)y
Set 'PowerCtrl' to 'reset'
/SP -&gt; 

start /SP/AgentInfo/console



/SP -&gt; set /SP/SystemInfo/CtrlInfo PowerCtrl=forceoff
The System will be force Powered Off.
Do you wish to Continue..?(y/n)y
Set 'PowerCtrl' to 'forceoff'
/SP -&gt; show /SP/SystemInfo/CtrlInfo                  

  /SP/SystemInfo/CtrlInfo
    Targets:

    Properties:
        PowerStatus = off
        PowerCtrl = (Cannot show property)
        BootCtrl = regular
        IdLedCtrl = off

    Target Commands:
        show
        set
</code></pre>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <section>
    <div id='container'>
      <div id='about-sidebar'>
      </div>
      <br/>
    </div>
    <script type='text/javascript'>
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type='text/javascript'>
      var pageTracker = _gat._getTracker("UA-4132881-1");
      pageTracker._initData();
      pageTracker._trackPageview();
    </script>
  </section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/mids/ubuntu/2020/07/29/screencasts-with-ffmpeg.html">Capturing Screencasts on Ubuntu using `ffmpeg`</a>
      </li>
    
      <li class="post">
        <a href="/devops/cloud/gcp/iam/2019/06/05/managed-projects-in-gcp.html">Projects in GCP using Central Billing Accounts</a>
      </li>
    
      <li class="post">
        <a href="/data-engineering/spark/hadoop/devops/2016/03/17/hwtb-sessions.html">Identifying User Activity from Streams of Raw Events</a>
      </li>
    
      <li class="post">
        <a href="/docker/data-engineering/spark/devops/2015/10/13/docker-cdh.html">Develop Spark Apps on Yarn using Docker</a>
      </li>
    
      <li class="post">
        <a href="/2015/06/01/ssh-tips.html">SSH Tips and Tricks</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
This work is openly licensed via <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> - 2024 - Mark Mims
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
